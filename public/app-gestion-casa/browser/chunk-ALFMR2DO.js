import{a as B,b as d,c as j,d as R,e as $,f as L,g as H,h as U,i as J,j as K,k as Q,l as W,m as X}from"./chunk-EIPKDWJL.js";import{a as Y,b as Z,c as ee}from"./chunk-R6RK33SS.js";import{B as l,D as m,E as F,F as T,G as n,H as t,I as x,J as f,K as _,L as p,O as M,P as i,Q as b,R as v,S as O,U as y,V as E,W as P,X as w,Y as I,_ as D,aa as N,ba as V,ca as k,da as G,ea as q,fa as z,ja as A,o as g,p as u,u as a,w as C,x as S}from"./chunk-YYEMXXJX.js";function ne(r,o){if(r&1&&(n(0,"option",23),i(1),t()),r&2){let e=o.$implicit;m("value",e),a(),v(" ",e," ")}}function ie(r,o){if(r&1){let e=f();n(0,"div",7)(1,"div",8)(2,"h2"),i(3),t(),n(4,"form",9),_("ngSubmit",function(){g(e);let c=p();return u(c.onSubmit())}),n(5,"div",10)(6,"div",11)(7,"label",12),i(8,"Tipo"),t(),n(9,"select",13)(10,"option",14),i(11,"Gasto"),t(),n(12,"option",15),i(13,"Ingreso"),t()()(),n(14,"div",11)(15,"label",12),i(16,"Monto (\u20AC)"),t(),x(17,"input",16),t()(),n(18,"div",11)(19,"label",12),i(20,"Descripci\xF3n"),t(),x(21,"input",17),t(),n(22,"div",10)(23,"div",11)(24,"label",12),i(25,"Categor\xEDa"),t(),n(26,"select",18)(27,"option",19),i(28,"Selecciona una categor\xEDa"),t(),l(29,ne,2,2,"option",20),t()(),n(30,"div",11)(31,"label",12),i(32,"Fecha"),t(),x(33,"input",21),t()(),n(34,"button",22),i(35," Guardar Transacci\xF3n "),t()()()()}if(r&2){let e,s=p();a(3),b(((e=s.transactionForm.get("type"))==null?null:e.value)==="income"?"Nuevo Ingreso":"Nuevo Gasto"),a(),m("formGroup",s.transactionForm),a(25),m("ngForOf",s.currentCategories),a(5),m("disabled",s.transactionForm.invalid)}}function oe(r,o){if(r&1){let e=f();n(0,"button",35),_("click",function(){g(e);let c=p().$implicit,h=p(2);return u(h.deleteTransaction(c.id,c.type))}),i(1," \u{1F5D1}\uFE0F "),t()}}function re(r,o){if(r&1&&(n(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),i(4),t(),n(5,"div",30)(6,"span",31),i(7),t(),n(8,"span",32),i(9),y(10,"date"),t()()(),n(11,"div",33)(12,"span"),i(13),y(14,"currency"),t()()(),l(15,oe,2,0,"button",34),t()),r&2){let e=o.$implicit;F("income",e.type==="income")("expense",e.type==="expense"),a(4),b(e.description),a(3),b(e.category),a(2),v(" ",e.date?E(10,12,e.date,"dd/MM/yyyy"):"Sin fecha"," "),a(3),T(e.type==="income"?"text-success":"text-danger"),a(),O(" ",e.type==="income"?"+":"-","",w(14,15,e.amount,"EUR","symbol","1.2-2")," "),a(2),m("ngIf",e.id)}}function ae(r,o){r&1&&(n(0,"div",36)(1,"p"),i(2,"Mostrando las primeras 20 transacciones"),t()())}function se(r,o){if(r&1&&(n(0,"div",8)(1,"h2"),i(2),t(),l(3,re,16,20,"div",24),y(4,"slice"),l(5,ae,3,0,"div",25),t()),r&2){let e=p();a(2),v("Todas las Transacciones (",e.allTransactions().length,")"),a(),m("ngForOf",P(4,3,e.allTransactions(),0,20)),a(2),m("ngIf",e.allTransactions().length>20)}}function ce(r,o){if(r&1){let e=f();n(0,"div",37)(1,"h2"),i(2,"No hay transacciones"),t(),n(3,"p"),i(4,"Comienza agregando tu primera transacci\xF3n"),t(),n(5,"button",38),_("click",function(){g(e);let c=p();return u(c.toggleForm())}),i(6,"+ Agregar Transacci\xF3n"),t()()}}var te=class r{constructor(o,e,s){this.fb=o;this.ingresoService=e;this.gastoService=s;this.transactionForm=this.fb.group({type:["expense",d.required],amount:["",[d.required,d.min(.01)]],description:["",d.required],category:["",d.required],date:[new Date().toISOString().split("T")[0],d.required]}),this.transactionForm.get("type")?.valueChanges.subscribe(()=>{this.transactionForm.patchValue({category:""})})}transactionForm;showForm=!1;incomeCategories=["Salario","Freelance","Inversiones","Bonos","Otros ingresos"];expenseCategories=["Alimentaci\xF3n","Gasoil","Alquiler","Luz","Agua","Prestamo Cetelem","Telefonia","Seguro Casa","Seguro Coche","Desayunos","Otros Gastos"];allTransactions=D(()=>{let o=this.ingresoService.ingresos(),e=this.gastoService.gastos();return[...o,...e].sort((s,c)=>new Date(c.fecha).getTime()-new Date(s.fecha).getTime())});get currentCategories(){return this.transactionForm.get("type")?.value==="income"?this.incomeCategories:this.expenseCategories}toggleForm(){this.showForm=!this.showForm,this.showForm||this.transactionForm.reset({type:"expense",amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0]})}onSubmit(){if(this.transactionForm.valid){let o=this.transactionForm.value,e={amount:parseFloat(o.amount),description:o.description,category:o.category,fecha:new Date(o.date),type:o.type};o.type==="income"?this.ingresoService.addIngreso(e):this.gastoService.addGasto(e),this.toggleForm()}}deleteTransaction(o,e){confirm("\xBFEst\xE1s seguro de que quieres eliminar esta transacci\xF3n?")&&(e==="income"?this.ingresoService.deleteIngreso(o):this.gastoService.deleteGasto(o))}static \u0275fac=function(e){return new(e||r)(C(W),C(Z),C(ee))};static \u0275cmp=S({type:r,selectors:[["app-transactions"]],decls:12,vars:4,consts:[["noTransactions",""],[1,"transactions"],[1,"transactions-header"],[1,"btn","btn-success",3,"click"],["class","form-container",4,"ngIf"],[1,"transactions-list"],["class","card",4,"ngIf","ngIfElse"],[1,"form-container"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],[1,"form-label"],["formControlName","type",1,"form-input"],["value","expense"],["value","income"],["type","number","step","0.01","formControlName","amount","placeholder","0.00",1,"form-input"],["type","text","formControlName","description","placeholder","Descripci\xF3n de la transacci\xF3n",1,"form-input"],["formControlName","category",1,"form-input"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","formControlName","date",1,"form-input"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],["class","transaction-item",3,"income","expense",4,"ngFor","ngForOf"],["class","load-more",4,"ngIf"],[1,"transaction-item"],[1,"transaction-main"],[1,"transaction-info"],[1,"transaction-description"],[1,"transaction-meta"],[1,"transaction-category"],[1,"transaction-date"],[1,"transaction-amount"],["class","btn-delete","title","Eliminar",3,"click",4,"ngIf"],["title","Eliminar",1,"btn-delete",3,"click"],[1,"load-more"],[1,"card","no-transactions"],[1,"btn","btn-primary",3,"click"]],template:function(e,s){if(e&1){let c=f();n(0,"app-layout")(1,"div",1)(2,"div",2)(3,"h1"),i(4,"Transacciones"),t(),n(5,"button",3),_("click",function(){return g(c),u(s.toggleForm())}),i(6),t()(),l(7,ie,36,4,"div",4),n(8,"div",5),l(9,se,6,7,"div",6)(10,ce,7,0,"ng-template",null,0,I),t()()()}if(e&2){let c=M(11);a(6),v(" ",s.showForm?"Cancelar":"+ Nueva Transacci\xF3n"," "),a(),m("ngIf",s.showForm),a(2),m("ngIf",s.allTransactions().length>0)("ngIfElse",c)}},dependencies:[z,N,V,q,G,k,X,$,K,Q,B,L,J,j,R,H,U,Y,A],styles:[".transactions[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.transactions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem}.transactions-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#1f2937;margin:0}.form-container[_ngcontent-%COMP%]{margin-bottom:2rem}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.transactions-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem}.transaction-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-radius:.5rem;background:#f9fafb;margin-bottom:.75rem;border-left:4px solid transparent;transition:all .2s ease}.transaction-item[_ngcontent-%COMP%]:hover{background:#f3f4f6;transform:translate(2px)}.transaction-item.income[_ngcontent-%COMP%]{border-left-color:#16a34a}.transaction-item.expense[_ngcontent-%COMP%]{border-left-color:#dc2626}.transaction-main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex:1}.transaction-info[_ngcontent-%COMP%]{flex:1}.transaction-description[_ngcontent-%COMP%]{font-weight:500;color:#1f2937;margin-bottom:.25rem;font-size:1rem}.transaction-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.transaction-category[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.transaction-date[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af}.transaction-amount[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;margin-right:1rem}.btn-delete[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:.25rem;transition:background-color .2s ease;opacity:.6}.btn-delete[_ngcontent-%COMP%]:hover{background:#fee2e2;opacity:1}.no-transactions[_ngcontent-%COMP%]{text-align:center;padding:3rem}.no-transactions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:#6b7280}.no-transactions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af;margin-bottom:2rem}.load-more[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#6b7280;font-size:.875rem;border-top:1px solid #e5e7eb;margin-top:1rem}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.transaction-main[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}.transaction-amount[_ngcontent-%COMP%]{text-align:right;margin-right:0}.transaction-meta[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}}"]})};export{te as TransactionsComponent};
